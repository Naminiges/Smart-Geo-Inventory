{% extends "base.html" %}

{% block title %}Daftar Gudang - Smart Geo Inventory{% endblock %}
{% block page_title %}Manajemen Gudang{% endblock %}
{% set page_icon = 'fas fa-warehouse' %}
{% set page_description = 'Kelola data gudang untuk penyimpanan barang' %}

{% block page_header_actions %}
<a href="{{ url_for('warehouses.create') }}" class="px-5 py-2.5 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all font-semibold shadow-md hover:shadow-lg inline-flex items-center">
  <i class="fas fa-plus mr-2"></i>Tambah Gudang
</a>
{% endblock %}

{% block content %}

<!-- Warehouses Table -->
<div class="bg-white rounded-xl shadow-md overflow-hidden">
  <div class="overflow-x-auto">
    {% if warehouse_data and warehouse_data|length > 0 %}
    <table class="w-full paginated-table">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Nama Gudang</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Alamat</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Total Item</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Total Stok</th>
          <th class="px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Aksi</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for item in warehouse_data %}
        {% set warehouse = item.warehouse %}
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4">
            <div class="flex items-center">
              <div class="bg-emerald-100 rounded-lg p-2 mr-3">
                <i class="fas fa-warehouse text-emerald-600"></i>
              </div>
              <strong class="text-gray-900">{{ warehouse.name }}</strong>
            </div>
          </td>
          <td class="px-6 py-4">
            <span class="text-sm text-gray-600">{{ warehouse.address }}</span>
          </td>
          <td class="px-6 py-4">
            <span class="inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium">
              {{ warehouse.stocks.count() }} jenis
            </span>
          </td>
          <td class="px-6 py-4">
            <span class="inline-flex items-center px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-sm font-medium">
              {{ item.total_stock }} unit
            </span>
          </td>
          <td class="px-6 py-4 text-center">
            <div class="flex items-center justify-center space-x-2">
              <a href="{{ url_for('warehouses.detail', id=warehouse.id) }}"
                 class="p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                 title="Lihat Detail">
                <i class="fas fa-eye"></i>
              </a>
              <a href="{{ url_for('warehouses.edit', id=warehouse.id) }}"
                 class="p-2 text-gray-600 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors"
                 title="Edit">
                <i class="fas fa-edit"></i>
              </a>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="text-center text-gray-500 py-12">
      <i class="fas fa-warehouse text-6xl mb-4 opacity-30"></i>
      <p class="text-lg font-medium">Belum ada data gudang</p>
      <p class="mb-4">Mulai dengan menambahkan gudang baru</p>
      <a href="{{ url_for('warehouses.create') }}" class="inline-flex items-center bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors">
        <i class="fas fa-plus-circle mr-2"></i> Tambah Gudang
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
